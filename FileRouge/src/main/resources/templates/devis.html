<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  	<title th:text="'Gestion Des Devis'"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
	 <head th:replace="fragments/headerload :: load">
  	<title th:text="'Gestion des devis'"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	
  </head>
  <body>
 	<div th:replace="fragments/header :: header"></div>
 
	    <div class="container">
	    <form  action="#" th:action="@{/{action}(action=${action})}" 
		  th:object="${devisform}" method="post"  >
		  
			 <table class="table w-auto" >
			 <thead>
			 	<tr>
			 	<th> id </th>
			 	<th>Client</th>
			 	<th>Vehicule</th>
			 	<th>Utilisateur</th>
			 	<th>Date de création</th>
			 	<th>Etat</th>				

	
			 	</tr>
			 </thead>
			 <tbody>
			 	<tr th:each="devis : ${listedevis}" th:unless="${devis.etat}">
			 		<td >
			 		<a	th:href="@{/afficherModifierdevis/{id}(id=${devis.id})}" 
			 		th:text="${devis.id}"></a></td>
			 		<td th:text="${devis.client.firstname + ' '+  devis.client.name}"/>
			 		<td th:text="${devis.vehicule.modele}"/>			 				 		
			 		<td th:text="${devis.user.firstname + ' ' + devis.user.lastname}"/>
			 		<td th:text="${devis.dateCreation}"/>
			 		<td th:text="${devis.etat}" />	 		
			 	</tr>
			  
			 </tbody>
		 </table>

		</form>
	<div class="border p-4 m-2"  th:if="${action == 'CreerDevis'}"> 		

	 <h3 th:if="${action == 'CreerDevis'}">Ajout d'une tâche</h3>
	 
		  <form action="#" th:action="@{/{action}(action=${action})}" 
		  th:object="${devisform}"   method="post"  >
		  <div th:each="e:${errors}" class="alert alert-danger alert-dismissible fade show" role="alert" >
		  <span th:text="${e.defaultMessage}"></span>
		  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
		  <span aria-hidden="true">&times;</span>
		  </button>
		  </div>
		  <div class="form-group " >
		  
		  		<input type="hidden" th:field="*{id}" th:value="*{id}" class="form-control"/>
		  		</div>
		  		
		   		<div class="form-group">
		   		<label for="client">Client</label>
		   	    <select th:field="*{client}" required class="form-control" >
		   	    
		   	    <option value="" selected hidden=true id="client">Selection Client</option>
			    <option th:each="client :${listeclient}" 
			    	th:value="${client.id}" th:utext="${client.firstname + ' ' + client.name }"/>
			    </select>
		   		<label for="vehicule">Vehicule</label>
		   	    <select th:field="*{vehicule}" required class="form-control" >
		   	    
		   	    <option value="" selected hidden=true id="vehicule">Selection Véhicule</option>
			    <option th:each="vehicule :${listevehicule}" 
			    	th:value="${vehicule.id}" th:utext="${vehicule.modele}"/>
			    </select>
			    </div>
			    <div class="form-group">
			    <label for="user">Utilisateur</label>
			    
			    <select th:field="*{user}" required id="user" class="form-control">
			    <option value="" selected hidden=true>Selection utilisateur</option>
			    <option th:each="user :${listeuser}" 
			    	th:value="${user.id}" th:utext="${user.firstname +' ' + user.lastname}"/>
			    </select>
			    </div>
			    <div class="form-group">
			    <label for="date">Date de Création</label>
		   		<input type="date" th:field="*{dateCreation}" class="form-control" id="date" placeholder="DateCreation" required/>
		   		</div>
		 <button class="btn btn-outline-success" type="submit">Valider</button>
		</form>
	 </div>

   <div th:replace="fragments/footer :: footer">&copy; 2020 DTA Application Web Gestion de Garage</div>
    </div>
    </body>

</html>