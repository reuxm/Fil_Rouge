<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  	<title th:text="'Gestion Des Classes'"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
	 <head th:replace="fragments/headerload :: load">
  	<title th:text="'Gestion De Mon Ecole'"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	
  </head>
  <body>
 	<div th:replace="fragments/header :: header"></div>
 
	    <div class="container">
			 <table th:unless="${action == 'ModifierTache' }">
			 <thead>
			 	<tr>
			 	<th>Id</th>
			 	<th>Commentaire</th>
			 	<th>Fiche</th>
			 	<th>Utilisateur</th>
			 	<th>Priorite</th>
			 	<th>Piece</th>
			 	<th>Quantité</th>
			 	<th>Etat</th>

	
			 	</tr>
			 </thead>
			 <tbody>
			 	<tr th:each="tache : ${listetache}">
			 		<td >
			 		<a	th:href="@{/afficherModifierTache/{id}(id=${tache.id})}" 
			 		th:text="${tache.id}"></a></td>
			 		<td th:text="${tache.commentaire}"/>
			 		<td th:text="${tache.fiche.client.firstname + ' '+  #dates.format(tache.fiche.dateCreation, 'dd/MM')}"/>
			 		<td th:text="${tache.user.firstname}"/>
			 		<td th:text="${tache.priorite.libelle}"/>
			 		<td th:text="${tache.piece.libelle}"/>
			 		<td th:text="${tache.qte}"/>
			 		<td th:if="${tache.etat}" th:text="oui"/>
			 		<td th:unless="${tache.etat}" th:text="non"/>
			 		<td >
			 	</tr>
			 </tbody>
		 </table>
	
		 		
	 <h2 th:if="${action == 'ModifierTache'}">
	 <a	th:href="@{/afficherCreerTache}" th:text="'Formulaire de Modification'"></a>
	 </h2>
	 <h2 th:unless="${action == 'ModifierTache'}">Formulaire d'Ajout</h2>
	 
	 <div>
		  <form action="#" th:action="@{/{action}(action=${action})}" 
		  th:object="${tacheform}"   method="post">
		  		<input type="hidden" th:field="*{id}" th:value="*{id}"/>
		    	<label for="com">Commentaire</label>
		   		<input type="text" th:field="*{commentaire}" id="com" placeholder="Commentaire" required/>
		   		<label for="fiche">Fiche</label>
		   	    <select th:field="*{fiche}" required>
		   	    <option value="" selected hidden id="fiche">Selection fiche</option>
			    <option th:each="fiche :${listefiche}" 
			    	th:value="${fiche.id}" th:utext="${fiche.client.firstname + ' ' + #dates.format(fiche.dateCreation, 'dd/MMM/yyyy')}"/>
			    </select>
			    <label for="user">Utilisateur</label>
			    <select th:field="*{user}" required id="user">
			    <option value="" selected hidden>Selection utilisateur</option>
			    <option th:each="user :${listeuser}" 
			    	th:value="${user.id}" th:utext="${user.firstname}"/>
			    </select>
			    <label for="priorite">Priorité</label>
			    <select th:field="*{priorite}" required id="priorite">
			    <option value="" selected hidden>Selection priorité</option>
			    <option th:each="priorite :${listepriorite}" 
			    	th:value="${priorite.id}" th:utext="${priorite.libelle}"/>
			    </select>
			    <label for="piece">Pièce</label>
			    <select th:field="*{piece}" required id="piece">
			    <option value="" selected="selected" hidden>Selection pièces</option>
			    <option th:each="piece :${listepiece}" 
			    
			    	th:value="${piece.id}" th:utext="${piece.libelle}"/>

			    </select>
			    
		   		<input type="number" th:field="*{qte}" id="qte" placeholder="Quantitée" required/>
		   		<label for="qte">Terminé</label>
		   		
		   		
	   			<input type="checkbox" id="etat" name="Etat" th:field="*{etat}" checked  />
				
		   <button type="submit">Valider</button>
		</form>
	 </div>

   <div th:replace="fragments/footer :: footer">&copy; 2020 DTA Application Web Gestion de Garage</div>
    </div>
    </body>

</html>